// home
.page__home
    .hero
        .content
            hgroup
                h1
                    @extend .sr-only
                &.has-lead > p
                    @include h1
    @include media-breakpoint-up(desktop)
        &.full-width
            main > .document-content .blocks
                --block-space-y: #{space(34)}

// projects
.projects__section,
.projects__page
    .taxonomies-list--inline
        @include grid(1)
    .taxonomy-categories
        justify-content: center
    .taxonomy-categories,
    .taxonomies-single
        display: flex
        flex-wrap: wrap
        gap: $spacing-2 space()
        @include media-breakpoint-up(desktop)
            gap: $spacing-1 $spacing-2
        li a
            @extend .btn
            @extend .button--small
            @extend .button--accent
            background: none
            line-height: 1
            min-width: unset

.projects__section
    .hero
        padding-bottom: 0
        margin-bottom: $spacing-2
    // .document-content
        // IMPORTANT : on n'applique pas un style sur tout un document comme ça -> on scope
        // color: var(--color-text-alt)
        // @include meta
    // on scope dans un tableau + class :
    table.projects-list
        border-bottom: 1px dashed var(--color-text-alt)
        th, td:not(.project-title)
            @include meta
        a
            text-decoration: none
            line-height: 1
        thead
            color: var(--color-text-alt)
            th
                font-weight: 400
        tr
            position: relative
            td:first-of-type
                @include h6
                a
                    @include stretched-link
                @include media-breakpoint-up(desktop)
                    @include h4
            // columsn width and spacings
            td:not(:last-of-type)
                padding-right: 0
                width: calc(#{columns(2)} + var(--grid-gutter))
            th:first-of-type,
            td:first-of-type
                padding-left: var(--grid-gutter)
                min-width: 45vw
                @include media-breakpoint-up(desktop)
                    width: calc(#{columns(5)} + var(--grid-gutter))
            th:last-of-type,
            td:last-of-type
                padding-right: var(--grid-gutter)
                text-align: right
            td + td,
            th + th
                padding-left: var(--grid-gutter)
            td
                border-top-style: dashed
                border-top-width: 1px
                border-color: var(--color-text-alt)
        // hover effect
        tbody
            td:not(.project-title)
                a
                    position: relative
                    z-index: 2
                    &:hover
                        @include link(inherit)

            tr
                &:first-of-type td
                    border-color: var(--color-text)
                &:hover
                    background: var(--color-accent)
                    td, a
                        color: var(--color-background)
                    &, + tr
                        td
                            border-color: var(--color-accent)
    @include media-breakpoint-down(desktop)
        .table-responsive
            margin-right: 0
            padding-right: 0

    // .project-list-header
    //     display: flex
    //     list-style: none
    //     justify-content: space-between
    //     padding: 0 var(--grid-gutter)
    //     @include media-breakpoint-down(desktop)
    //         display: none
    //     // IMPORTANT : on évite les id (#)
    //     #index-title
    //         width: columns(5)
    //     #index-type
    //         width: columns(2)
    //     #index-year
    //         width: columns(1)
    //         display: flex
    //         justify-content: flex-end
    // .project-list
    //     border-top: 1px dotted var(--color-text-alt)
    // .section-taxonomies-container
    //     .taxonomies-list
    //         display: flex
    //         justify-content: center
    //         @include media-breakpoint-down(desktop)
    //             flex-direction: columns
    //             display: flex
    //             align-items: center
    //         .taxonomy-categories
    //             ul
    //                 display: flex
    //                 @include media-breakpoint-down(desktop)
    //                     flex-direction: column
    //                     display: flex
    //                 li
    //                     margin-right: $spacing-2
    //                     @include media-breakpoint-down(desktop)
    //                         margin-bottom: $spacing-2
    // ol
    //     list-style: none
    //     padding-left: var(--grid-gutter-negative)
    //     #index-list
    //         justify-content: space-evenly
    //         border-bottom: 1px dotted var(--color-text-alt)
    //         &:hover
    //             background-color: var(--color-accent)
    //             a
    //                 color: var(--color-background)
    //         .project-link
    //             display: flex
    //             text-decoration: none
    //             justify-content: space-evenly
    //             @include media-breakpoint-down(desktop)
    //                 display: flex
    //                 flex-direction: column
    //                 margin: 0 20px
    //             #index-title,
    //             #index-type,
    //             #index-year
    //                 margin: $spacing-2 0
    //             #index-title
    //                 @include h4
    //                 width: columns(5)
    //                 @include media-breakpoint-down(desktop)
                            // IMPORTANT : éviter les répétitions :
    //                     // plutôt que de mettre du 100% à chaque fois on va plutôt
                            // uniquement indiquer la width en desktop
    //                     width: 100%
    //                     margin-bottom: $spacing-1
    //             #index-type
    //                 width: columns(2)
    //                 @include media-breakpoint-down(desktop)
    //                     width: 100%
    //                     margin-bottom: $spacing-1
    //                     margin-top: 0
    //             #index-year
    //                 width: columns(1)
    //                 display: flex
    //                 justify-content: flex-end
                        // IMPORTANT : parfois un text-align vaut mieux que du flex
                        // dans ce cas flex est une machine de guerre inutile
    //                 @include media-breakpoint-down(desktop)
    //                     justify-content: start
    //                     width: 100%
    //                     margin-bottom: $spacing-1
    //                     margin-top: 0


.projects__page
    .hero
        .hero-text
            padding-bottom: 0
            h1
                width: columns(7)
                @include media-breakpoint-down(desktop)
                    width: 100%
                span
                    @include body-text
                    color: var(--color-text)
                    font-weight: 300
        > .container
            display: flex
            flex-direction: column
            .project-year
                order: -1
            @include media-breakpoint-down(desktop)
                .hero-text
                    margin-top:  $spacing-3
                .project-year
                    margin-top:  $spacing-5
        @include media-breakpoint-up(desktop)
            margin-bottom: 0
            &.hero--with-image, .content
                padding-top: 0
                figure
                    margin-top: 0
            .container
                padding: 0
            .hero-text
                @include container
                padding-left: calc(#{offset(2)} + var(--grid-gutter))
                hgroup
                    flex-direction: column
                    width: columns(7)
                h1
                    display: flex
                    align-items: baseline
                    span
                        position: absolute
                        right: var(--grid-gutter)
                    + p
                        margin-top: $spacing-2 !important
                .taxonomies-single
                    margin: 0
            figure
                order: -1
                width: 100%
                img
                    height: $hero-project-image-height
                figcaption
                    padding-left: var(--grid-gutter)
                    padding-right: var(--grid-gutter)
                    &::before
                        right: var(--grid-gutter)
            &.hero--with-image
                .project-year
                    left: 0
                    margin-top: $spacing-5
                    padding-left: var(--grid-gutter)
                    padding-right: var(--grid-gutter)
                    position: absolute
                    top: $hero-project-image-height
    .document-content
        .project-sidebar
            display: none
        .block-image
            .block-content
                picture
                    margin: 0
                    width: columns(8)
                    @include media-breakpoint-down(desktop)
                        width: 100%
        .block-siblings-navigation
            display: none
        @include media-breakpoint-up(desktop)
            &:not(.full-width)
                .blocks
                    .block-content
                        padding-left: offset(2)
                        padding-right: offset(2)
                    .block-chapter
                        .block-content
                            padding-right: offset(1)
    .block-image.image-landscape,
    .block-gallery--large
        figure
            margin-bottom: var(--grid-gutter) !important
    .block-gallery, 
    .block-image
        margin-bottom: var(--grid-gutter)
        figcaption
            @include meta
            .credit
                color: var(--color-text-alt)
    .block-gallery + .block-image,
    .block-image + .block-gallery,
    .block-gallery + .block-gallery,
    .block-image + .block-image
        margin-top: 0
    // others projects block
    .blocks .block:last-child
        &.block-projects--grid
            border-top: 1px dashed var(--color-text-alt)
            padding-top: $spacing-4
            .block-title
                @include h2
                text-align: center
                a::after
                    opacity: 0
                a:hover::after
                    opacity: 1
            @include media-breakpoint-up(desktop)
                margin-top: space(33)
                padding-top: space(37)
                .block-content
                    padding-right: 0
                    padding-left: 0
    @include media-breakpoint-up(desktop)
        html:not(.has-menu-opened) &
            #document-header:not(.sticky)
                background-color: $header-sticky-background
                figure
                    top: unset
                .logo
                    img
                        display: none
                    + figcaption
                        display: block
                        border: 0 !important
                        clip: unset !important
                        clip-path: unset !important
                        height: auto !important
                        overflow: unset !important
                        padding: unset !important
                        margin: unset !important
                        position: static !important
                        width: unset !important
                        white-space: unset !important
        &:not(.full-width)
            .block-gallery--grid
                .gallery
                    @include grid(2)
                    figure
                        button
                            width: 100%
                        img
                            aspect-ratio: 1.36/1
                            object-fit: cover
// global
.block-projects--grid,
.projects
    .projects--grid
        @include grid(3, desktop)
        .project-content
            .project-title
                @include h4
                color: $color-text
            .project-subtitle
                @include meta
                color: $color-text
            .project-meta
                time
                    color: $color-text
        .media
            img
                aspect-ratio: 1.36/1
                object-fit: cover
